(function() {
  var persisted = <%= @comment.persisted? %>
  var $streamForm = $("[data-behavior='stream-form']");

  function renderComment() {
    $streamForm.after("<%= j render 'comments/stream_comment', comment: @comment %>")
  }

  function renderError() {
    alert('Es gab ein Problem, bitte versuche es sp√§ter nochmal.');
  }

  function updateComponent() {
    persisted ? renderComment() : renderError();
    $streamForm.replaceWith("<%= j render 'form', commentable: @comment.commentable %>");
    APP.components.stream.init();
  }

  updateComponent();
})();
