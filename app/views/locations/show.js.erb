(function() {
  var $streamContainer = $("[data-behavior='stream-container']");
  var $streamPaginateLink = $("[data-behavior='paginate-link']");

  var $meetingsContainer = $("[data-behavior='meetings-<%= @scope %>-container']");
  var $meetingsPaginateLink = $("[data-behavior='paginate-<%= @scope %>']");

  function updateComponent() {
    <% if @scope == :posts %>
      $streamContainer.append("<%= j render partial: 'locations/posts/post', collection: @new_content %>");
      $streamPaginateLink.replaceWith("<%= j view_more_link @new_content, params: { scope: @scope } %>");
      APP.components.stream.init();
    <% else %>
      $meetingsContainer.append("<%= j(render @new_content) %>");
      $meetingsPaginateLink.replaceWith("<%= j view_more_scoped(@new_content, @scope) %>");
    <% end %>
  }

  updateComponent();
})();
