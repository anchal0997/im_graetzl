(function() {
  var $streamContainer = $("[data-behavior='stream-container']");
  var $paginateLink = $(".view-more-container");

  function updateComponent() {
    <% if params[:page].blank? && @locations.empty? %>
      $streamContainer.append("<%= j render 'empty_message' %>")
    <% else %>
      $streamContainer.append("<%= j render @locations %>");
      <% if @locations.next_page.present? %>
        $paginateLink.html("<%= j next_page_link %>");
      <% else %>
        $paginateLink.hide();
      <% end %>
      APP.components.masonryFilterGrid.adjustNewCards();
    <% end %>
  }

  updateComponent();
})();
